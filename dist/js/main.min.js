const token="6b6edd59-d784-4e87-a1cb-342f6158ace1";async function displayCard(e){const t=document.querySelector("#taskBoard"),n=document.createElement("div");n.className="card",n.setAttribute("data-id",e.id),n.innerHTML=`\n      <div class="card__text">\n      <h4>Name:</h4> <p>${e.name}</p>\n      <h4>Doctor:</h4> <p>${e.doctor}</p>\n      <h4>Description:</h4> <p>${e.description}</p>\n      </div>\n      <div class="button__contianer">\n      <button onclick="showMore(${e.id})">Show more</button>\n      <button onclick="openEditModal(${e.id})">Edit</button>\n      </div>\n      <span class="delete-icon" onclick="deleteCard(${e.id})">&#10006;</span>\n    `,t.appendChild(n)}async function getAllCards(){const e=await fetch("https://ajax.test-danit.com/api/v2/cards",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}});(await e.json()).forEach(async e=>{await displayCard(e)})}async function deleteCard(e){if(confirm("Are you sure, you want to delete?")){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}});if(t.ok){document.querySelector(`.card[data-id="${e}"]`).remove()}else console.error("Error to delete:",t.statusText)}}async function openEditModal(e){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}}),n=await t.json(),a=(e,t)=>e===t?"selected":"",i=document.createElement("div");i.className="edit__form",i.innerHTML=`\n    <div class="input-group">\n      <input required="" type="text" name="text" autocomplete="off" class="input" id="editName" value="${n.name}">\n      <label for="editName" class="user-label">Name</label>\n    </div>\n    <label for="editDoctor" class="select__label name__select1">Doctor</label>\n    <div class="select select__edit-container">\n    <select id="editDoctor" class="edit__select" onchange="handleDoctorChange()">\n    <option value="Cardiologist" ${a(n.doctor,"Cardiologist")}>Cardiologist</option>\n    <option value="Dentist"  ${a(n.doctor,"Dentist")}>Dentist</option>\n    <option value="Therapist"  ${a(n.doctor,"Therapist")}>Therapist</option>\n    </select>\n    </div>\n    <div class="input-group">\n    <input required="" type="text" name="text" autocomplete="off" class="input" id="editDescription" value="${n.description}">\n    <label for="editDescription" class="user-label">Description</label>\n  </div>\n    \n    <label for="editStatus" class="select__label name__select2">Status</label>\n    <div class="select select__edit-container">\n    <select id="editStatus" class="edit__select">\n      <option value="" disabled selected>Select status</option>\n      <option value="active" ${a(n.status,"active")}>Active</option>\n      <option value="completed" ${a(n.status,"completed")}>Completed</option>\n    </select>\n    </div>\n    <label for="editPriority" class="select__label name__select3">Priority</label>\n    <div class="select select__edit-container">\n    <select id="editPriority" class="edit__select">\n      <option value="" disabled selected>Select priority</option>\n      <option value="low" ${a(n.priority,"low")}>Low</option>\n      <option value="medium" ${a(n.priority,"medium")}>Medium</option>\n      <option value = "high" ${a(n.priority,"high")}> High</ >\n    </select > \n    </div>\n    <div id="additionalFields"></div>\n    <button onclick="saveChanges(${e})">Save</button>\n  `;const o=document.getElementById("editFormContainer");o.innerHTML="",o.appendChild(i);document.getElementById("editModal").style.display="block",handleDoctorChange(n)}function handleDoctorChange(){const e=document.getElementById("editDoctor").value,t=document.getElementById("additionalFields");t.innerHTML="","Cardiologist"===e?t.innerHTML='\n      <div class="input-group">\n        <input required=""  name="text" autocomplete="off" class="input" type="number" id="editAge">\n        <label for="editAge" class="user-label">Age</label>\n      </div>\n      <div class="input-group">\n        <input required=""  name="text" autocomplete="off" class="input" type="number" id="editPressure">\n        <label for="editPressure" class="user-label">Normal pressure</label>\n      </div>\n      <div class="input-group">\n        <input required=""  name="text" autocomplete="off" class="input" type="number" id="editBMI">\n        <label for="editBMI" class="user-label">Body mass index</label>\n      </div>\n      <div class="input-group">\n        <input required=""  name="text" autocomplete="off" class="input" type="text" id="editHeartDisease">\n        <label for="editHeartDisease" class="user-label">Past diseases</label>\n      </div>\n    ':"Dentist"===e?t.innerHTML='\n    <label for="editLastVisitDate" class="select__label name__select4">Date of the last visit</label>\n    <div class="input-group">\n      <input required="" name="text" autocomplete="off" class="input edit__date" type="date" id="editLastVisitDate">\n    </div>\n    ':"Therapist"===e&&(t.innerHTML='\n    <div class="input-group">\n      <input required=""  name="text" autocomplete="off" class="input" type="number" id="editAge">\n      <label for="editAge" class="user-label">Age</label>\n    </div>\n    ')}function closeModal(){document.getElementById("editModal").style.display="none";document.querySelector(".edit__form").innerHTML=""}async function saveChanges(e){const t=document.querySelector(".edit__form"),n=document.querySelector(`.card[data-id= "${e}"]`),a=t.querySelector("#editName").value,i=t.querySelector("#editDoctor").value,o=t.querySelector("#editDescription").value,s={name:a,doctor:i,description:o,status:t.querySelector("#editStatus").value,priority:t.querySelector("#editPriority").value};if("Cardiologist"===i){const e=t.querySelector("#editAge").value,n=t.querySelector("#editPressure").value,a=t.querySelector("#editBMI").value,i=t.querySelector("#editHeartDisease").value;s.age=e,s.pulse=n,s.massIndex=a,s.pastDiseases=i}else if("Dentist"===i){const e=t.querySelector("#editLastVisitDate").value;s.lastVisit=e}else if("Therapist"===i){const e=t.querySelector("#editAge").value;s.age=e}await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+token},body:JSON.stringify(s)});n.innerHTML=`\n  <div class="card__text">\n  <h4>Name:</h4> <p>${a}</p>\n  <h4>Doctor:</h4> <p>${i}</p>\n  <h4>Description:</h4> <p>${o}</p>\n  </div>\n  <div class="button__contianer">\n  <button onclick="showMore(${e})">Show more</button>\n  <button onclick="openEditModal(${e})">Edit</button>\n  </div>\n  <span class="delete-icon" onclick="deleteCard(${e})">&#10006;</span>\n      `,closeModal()}async function showMore(e){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}}),n=await t.json(),a=document.getElementById("detailsContainer"),i=document.createElement("div");i.className="details__content";const o=`\n    <h4>Name:</h4> <p> ${n.name}</p>\n    <h4>Doctor: <span>${n.doctor}</span></h4>\n    <h4>Description:</h4> <p> ${n.description}</p>\n    <h4>Priority: <span>${n.priority}</span></h4>\n    <h4>Status: <span>${n.status}</span></h4>\n  `;"Cardiologist"===n.doctor?i.innerHTML=`\n    ${o}\n      <h4>Age: <span>${n.age}</span></h4>\n      <h4>Normalpressure: <span>${n.pulse}</span></h4>\n      <h4>Body mass index: <span>${n.massIndex}</span></h4>\n      <h4>Past diseases:</h4> <p> ${n.pastDiseases}</p>\n    `:"Dentist"===n.doctor?i.innerHTML=`\n    ${o}\n      <h4>Date of the last visit:</h4> <p> ${n.lastVisit}</p>\n    `:"Therapist"===n.doctor&&(i.innerHTML=`\n    ${o}\n    <h4>Age: <span>${n.age}</span></h4>\n    `),a.innerHTML="",a.appendChild(i);document.getElementById("detailsModal").style.display="block"}function closeShowMore(){document.getElementById("detailsModal").style.display="none"}async function filterCards(){const e=document.getElementById("searchInput").value.toLowerCase(),t=document.getElementById("doctorFilter").value,n=document.getElementById("statusFilter").value,a=document.getElementById("priorityFilter").value,i=await fetch("https://ajax.test-danit.com/api/v2/cards",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}});(await i.json()).forEach(i=>{const o=document.querySelector(`.card[data-id="${i.id}"]`),s=i.name,l=i.doctor,d=i.status,r=i.priority,c=s?s.toLowerCase():"",p=l||"",u=d?d.toLowerCase():"",m=r?r.toLowerCase():"",h=c.includes(e),y=""===t||p===t,v=""===n||u===n,f=""===a||m===a;o.style.display=h&&v&&f&&y?"":"none"})}getAllCards();
//# sourceMappingURL=../sourcemaps/main.min.js.map
