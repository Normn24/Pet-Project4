

const header=document.querySelector("header"),headerGreetings=document.querySelectorAll(".header__greetings"),headerAppointmentHeading=document.querySelectorAll(".header__appointment-heading"),main=document.querySelector("main"),btnMakeForm=document.querySelector(".header__btn-make-visit"),form=document.querySelector(".header__form"),btnCloseForm=document.querySelector(".form__button-close-form"),selectMenuDoctors=document.querySelector(".form__selector-doctors"),purpose=document.querySelector(".form__purpose"),description=document.querySelector(".form__description"),selectUrgency=document.querySelector(".form__selector-urgency"),fullName=document.querySelector(".form__patient-name"),lastVisit=document.querySelector(".form__last-visit"),age=document.querySelector(".form__age"),pulse=document.querySelector(".form__pulse"),massIndex=document.querySelector(".form__mass-index"),pastDiseases=document.querySelector(".form__past-diseases"),btnCreateVisit=document.querySelector(".form__button-create-visit"),paragraphChooseDoctor=document.querySelector(".form__paragraph-choose-doctor"),paragraphPurpose=document.querySelector(".form__paragraph-purpose"),paragraphDescription=document.querySelector(".form__paragraph-description"),paragraphUrgency=document.querySelector(".form__paragraph-urgency"),paragraphName=document.querySelector(".form__paragraph-name"),paragraphLastVisit=document.querySelector(".form__paragraph-last-visit"),paragraphAge=document.querySelector(".form__paragraph-age"),paragraphPulse=document.querySelector(".form__paragraph-pulse"),paragraphMassIndex=document.querySelector(".form__paragraph-mass-index"),paragraphPastDiseases=document.querySelector(".form__paragraph-past-diseases"),paragraphError=document.querySelector(".form__error"),paragraphComment=document.querySelector(".form__paragraph-comment"),comment=document.querySelector(".form__comment");let formData=[];class Module{constructor(){}closeForm(){const e=document.getElementsByTagName("button")[0];header.addEventListener("click",t=>{"flex"===form.style.display&&(t.target===form||t.target===e||form.contains(t.target)||(form.style.display="none",btnMakeForm.style.display="block"))}),btnCloseForm.addEventListener("click",()=>{event.preventDefault(),btnMakeForm.style.display="inline-block",form.style.display="none",headerGreetings.forEach(e=>{e.style.display="flex"})})}sendInfo(){btnCreateVisit.addEventListener("click",async e=>{e.preventDefault();if(Array.from(document.querySelectorAll(".form input, .form select")).some(e=>{if("none"===window.getComputedStyle(e).display)return!1;if(""===e.value&&"Введіть коментарій"!==e.getAttribute("placeholder")){const t=e.getAttribute("placeholder")||e.getAttribute("name");return paragraphError.innerText="*"+t,paragraphError.style.display="block",!0}return!1}))return;paragraphError.style.display="none";const t=new CreateVisit;t.getInfo(),form.style.display="none",btnMakeForm.style.display="block";try{await sendInfo(t),t.createCard(),t.deleteCard(),saveCards.saveToLocalStorage(t)}catch(e){console.error("Error sending data:",e)}})}saveForm(){localStorage.setItem("formState",form.style.display)}getForm(){const e=localStorage.getItem("formState");e&&(form.style.display=e)}}class Visit{constructor(){this.dontAddElements=!0}makeOptions(){if(selectMenuDoctors&&!0===this.dontAddElements){this.dontAddElements=!1;const e=()=>{paragraphPurpose.style.display="block",purpose.style.display="inline-block",paragraphDescription.style.display="block",description.style.display="block",paragraphUrgency.style.display="block",selectUrgency.style.display="block",paragraphName.style.display="block",fullName.style.display="block",btnCreateVisit.style.display="block",paragraphComment.style.display="block",comment.style.display="block",header.style.height="1000px",selectMenuDoctors.removeEventListener("change",e)};selectMenuDoctors.addEventListener("change",e)}}}class VisitDentist extends Visit{constructor(){super()}doctorNotes(){selectMenuDoctors&&selectMenuDoctors.addEventListener("change",()=>{"Dentist"===selectMenuDoctors.value?(paragraphLastVisit.style.display="block",lastVisit.style.display="block"):(paragraphLastVisit.style.display="none",lastVisit.style.display="none")})}}class VisitTherapist extends Visit{constructor(){super()}doctorNotes(){selectMenuDoctors&&selectMenuDoctors.addEventListener("change",()=>{"Терапевт"===selectMenuDoctors.value||"Therapist"===selectMenuDoctors.value?(paragraphAge.style.display="block",age.style.display="block"):(paragraphAge.style.display="none",age.style.display="none")})}}class VisitCardiologist extends Visit{constructor(){super()}doctorNotes(){selectMenuDoctors&&selectMenuDoctors.addEventListener("change",()=>{"Cardiologist"===selectMenuDoctors.value?(paragraphPastDiseases.style.display="block",pastDiseases.style.display="bloke",paragraphMassIndex.style.display="block",massIndex.style.display="block",paragraphPastDiseases.style.display="block",pastDiseases.style.display="block"):(paragraphPastDiseases.style.display="none",pastDiseases.style.display="none",paragraphMassIndex.style.display="none",massIndex.style.display="none",paragraphPastDiseases.style.display="none",pastDiseases.style.display="none")})}}btnMakeForm.addEventListener("click",()=>{form.style.display="flex",btnMakeForm.style.display="none",headerGreetings.forEach(e=>{e.style.display="none"})});const module=new Module,visit=new Visit;visit.makeOptions();const visitDentist=new VisitDentist;visitDentist.doctorNotes();const visitTherapist=new VisitTherapist;visitTherapist.doctorNotes();const visitCardiologist=new VisitCardiologist;visitCardiologist.doctorNotes(),module.sendInfo(),module.closeForm();class CreateVisit{constructor(){this.doctor,this.name,this.urgency,this.purpose,this.lastVisit,this.age,this.pulse,this.massIndex,this.pastDiseases,this.statusVisit,this.card,this.id,this.btnDelete,this.comment}getInfo(){this.doctor=form.querySelector(".form__selector-doctors").value,this.name=form.querySelector(".form__patient-name").value,this.urgency=form.querySelector(".form__selector-urgency").value,this.purpose=form.querySelector(".form__purpose").value,this.description=form.querySelector(".form__description").value,this.lastVisit=form.querySelector(".form__last-visit").value,this.age=form.querySelector(".form__age").value,this.pulse=form.querySelector(".form__pulse").value,this.massIndex=form.querySelector(".form__mass-index").value,this.pastDiseases=form.querySelector(".form__past-diseases").value,this.error=form.querySelector(".form__comment").value}createCard(){const e=document.createElement("div");this.card=e;const t=document.createElement("div");t.classList.add("card__delete-card"),this.btnDelete=t,this.card.appendChild(t),e.classList.add("card");const s=document.createElement("p");s.innerText=`Visit to ${this.doctor}а`;const r=document.createElement("p");r.innerText=""+this.name,main.appendChild(e),e.appendChild(s),e.appendChild(r);const o=document.createElement("button");o.innerText="Show more",o.classList.add("card__btn-more-info"),e.appendChild(o),o.addEventListener("click",()=>{o.style.display="none";const t=this.age,s=this.purpose,r=this.lastVisit,a=this.urgency,n=this.massIndex,i=this.description,l=this.pulse,c=this.pastDiseases,d=document.createElement("select"),p=document.createElement("option"),m=document.createElement("option");p.value="Open",p.innerText="Open",m.value="Done",m.innerText="Done",p.selected=!0,d.appendChild(p),d.appendChild(m),this.statusVisit=d.value;const u=this.statusVisit,y=document.createElement("p");y.innerText="Status of the visit: "+u;const h=document.createElement("p");h.innerText=""+t;const g=document.createElement("p");g.innerText="Urgency: "+a;const f=document.createElement("p");f.innerText="Purpose: "+s;const _=document.createElement("p");_.innerText=""+r;const S=document.createElement("p");S.innerText=""+n;const v=document.createElement("p");v.innerText="Information about previous diseases of the cardiovascular system: "+c;const C=document.createElement("p");C.innerText="Notes for the visit: "+i;const b=document.createElement("p");b.innerText="The pulse is normal: "+l;const E=this.comment,D=document.createElement("p");D.innerText="Comment: "+E,"Cardiologist"===this.doctor&&(e.appendChild(h),e.appendChild(b),e.appendChild(S),e.appendChild(v)),"Therapist"===this.doctor&&e.appendChild(h),"Dentist"===this.doctor&&e.appendChild(_),e.appendChild(g),e.appendChild(f),e.appendChild(C),e.appendChild(y),e.appendChild(D)})}deleteCard(){this.btnDelete.addEventListener("click",async()=>{try{await deleteCards(this.id),saveCards.deleteCard(this.id),main.removeChild(this.card)}catch(e){console.error("Error sending data:",e)}})}}async function sendInfo(e){try{const t=await fetch("https://ajax.test-danit.com/api/v2/cards",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 93d2380e-85c6-455b-bdc8-9c60e32adeec"},body:JSON.stringify(e)}),s=await t.json();return console.log("Response data:",s),console.log(s),e.id=s.id,s}catch(e){throw console.error("Error sending data:",e),new Error(e)}}async function deleteCards(e){console.log(e);try{await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer 93d2380e-85c6-455b-bdc8-9c60e32adeec"}})}catch(e){throw console.error("Error sending data:",e),new Error(e)}}class LS{constructor(){this.retrieveStoredCards()}saveToLocalStorage(e){let t=JSON.parse(localStorage.getItem("storedCards"))||[];t.push(e),localStorage.setItem("storedCards",JSON.stringify(t))}retrieveStoredCards(){(JSON.parse(localStorage.getItem("storedCards"))||[]).forEach(e=>{const t=new CreateVisit;Object.assign(t,e),t.id=e.id,t.createCard(),t.deleteCard()})}deleteCard(e){console.log(e);let t=JSON.parse(localStorage.getItem("storedCards"))||[];const s=t.findIndex(t=>t.id===e);-1!==s?(t.splice(s,1),localStorage.setItem("storedCards",JSON.stringify(t))):console.log("карточка не знайдена")}}const saveCards=new LS;
//# sourceMappingURL=../sourcemaps/main.min.js.map
