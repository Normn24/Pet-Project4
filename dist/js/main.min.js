const token="6b6edd59-d784-4e87-a1cb-342f6158ace1";async function displayCard(e){const t=document.querySelector("#taskBoard"),o=document.createElement("div");o.className="card",o.setAttribute("data-id",e.id),o.setAttribute("data-status",e.status),o.setAttribute("data-priority",e.priority),o.innerHTML=`\n      <p>Name: ${e.name}</p>\n      <p>Doctor: ${e.doctor}</p>\n      <button onclick="showMore(${e.id})">Show more</button>\n      <button onclick="openEditModal(${e.id})">Edit</button>\n      <span class="delete-icon" onclick="deleteCard(${e.id})">&#10006;</span>\n    `,t.appendChild(o)}async function getAllCards(){const e=await fetch("https://ajax.test-danit.com/api/v2/cards",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}});(await e.json()).forEach(async e=>{await displayCard(e)})}async function deleteCard(e){if(confirm("Are you sure, you want to delete?")){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}});if(t.ok){document.querySelector(`.card[data-id="${e}"]`).remove()}else console.error("Error to delete:",t.statusText)}}async function openEditModal(e){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}}),o=await t.json(),n=(e,t)=>e===t?"selected":"",i=document.createElement("div");i.className="edit-form",i.innerHTML=`\n    <label for="editName">Name:</label>\n    <input type="text" id="editName" value="${o.name}">\n    <label for="editDoctor">Doctor:</label>\n    <select id="editDoctor" onchange="handleDoctorChange()">\n      <option value="Cardiologist" ${n(o.doctor,"Cardiologist")}>Cardiologist</option>\n      <option value="Dentist"  ${n(o.doctor,"Dentist")}>Dentist</option>\n      <option value="Therapist"  ${n(o.doctor,"Therapist")}>Therapist</option>\n    </select>\n    <label for="editDescription">Description:</label>\n    <input type="text" id="editDescription" value="${o.description}">\n    <label for="editStatus">Status:</label>\n    <select id="editStatus">\n      <option value="" disabled selected>Select status</option>\n      <option value="active" ${n(o.status,"active")}>Active</option>\n      <option value="completed" ${n(o.status,"completed")}>Completed</option>\n    </select>\n    <label for="editPriority">Priority:</label>\n    <select id="editPriority">\n      <option value="" disabled selected>Select priority</option>\n      <option value="low" ${n(o.priority,"low")}>Low</option>\n      <option value="medium" ${n(o.priority,"medium")}>Medium</option>\n      <option value = "high" ${n(o.priority,"high")}> High</ >\n    </select > \n    <div id="additionalFields"></div>\n    <button onclick="saveChanges(${e})">Save</button>\n  `;const a=document.getElementById("editFormContainer");a.innerHTML="",a.appendChild(i);document.getElementById("editModal").style.display="block",handleDoctorChange(o)}function handleDoctorChange(){const e=document.getElementById("editDoctor").value,t=document.getElementById("additionalFields");t.innerHTML="","Cardiologist"===e?t.innerHTML='\n      <label for="editAge">Age:</label>\n      <input type="text" id="editAge">\n      <label for="editPressure">Normal blood pressure:</label>\n      <input type="text" id="editPressure" >\n      <label for="editBMI">Body mass index</label>\n      <input type="text" id="editBMI" >\n      <label for="editHeartDisease">Past diseases of the cardiovascular system:</label>\n      <input type="text" id="editHeartDisease" >\n    ':"Dentist"===e?t.innerHTML='\n      <label for="editLastVisitDate">Date of the last visit:</label>\n      <input type="date" id="editLastVisitDate">\n    ':"Therapist"===e&&(t.innerHTML='\n      <label for="editAge">Age:</label>\n      <input type="number" id="editAge">\n    ')}function closeModal(){document.getElementById("editModal").style.display="none";document.querySelector(".edit-form").innerHTML=""}async function saveChanges(e){const t=document.querySelector(".edit-form"),o=document.querySelector(`.card[data-id= "${e}"]`),n=t.querySelector("#editName").value,i=t.querySelector("#editDoctor").value,a={name:n,doctor:i,description:t.querySelector("#editDescription").value,status:t.querySelector("#editStatus").value,priority:t.querySelector("#editPriority").value};if("Cardiologist"===i){const e=t.querySelector("#editAge").value,o=t.querySelector("#editPressure").value,n=t.querySelector("#editBMI").value,i=t.querySelector("#editHeartDisease").value;a.age=e,a.pressure=o,a.bmi=n,a.diseases=i}else if("Dentist"===i){const e=t.querySelector("#editLastVisitDate").value;a.date=e}else if("Therapist"===i){const e=t.querySelector("#editAge").value;a.age=e}await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+token},body:JSON.stringify(a)});o.innerHTML=`\n      <p>Name: ${n}</p>\n      <p>Doctor: ${i}</p>\n      <button onclick="showMore(${e})">Show more</button>\n      <button onclick="openEditModal(${e})">Edit</button>\n      <span class="delete-icon" onclick="deleteCard(${e})">&#10006;</span>\n      `,closeModal()}async function showMore(e){const t=await fetch("https://ajax.test-danit.com/api/v2/cards/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}}),o=await t.json(),n=document.getElementById("detailsContainer"),i=document.createElement("div");i.className="details-content";const a=`\n    <p>Name: ${o.name}</p>\n    <p>Doctor: ${o.doctor}</p>\n    <p>Description: ${o.description}</p>\n    <p>Priority: ${o.priority}</p>\n    <p>Status: ${o.status}</p>\n  `;"Cardiologist"===o.doctor?i.innerHTML=`\n    ${a}\n      <p>Age: ${o.age}</p>\n      <p>Normal blood pressure: ${o.pressure}</p>\n      <p>Body mass index: ${o.bmi}</p>\n      <p>Past diseases of the cardiovascular system: ${o.diseases}</p>\n    `:"Dentist"===o.doctor?i.innerHTML=`\n    ${a}\n      <p>Date of the last visit: ${o.date}</p>\n    `:"Therapist"===o.doctor&&(i.innerHTML=`\n    ${a}\n      <p>Age: ${o.age}</p>\n    `),n.innerHTML="",n.appendChild(i);document.getElementById("detailsModal").style.display="block"}function closeDetailsModal(){document.getElementById("detailsModal").style.display="none"}function filterCards(){const e=document.getElementById("searchInput").value.toLowerCase(),t=document.getElementById("statusFilter").value,o=document.getElementById("priorityFilter").value;document.querySelectorAll(".card").forEach(n=>{const i=n.querySelector("p:first-child"),a=n.getAttribute("data-status"),r=n.getAttribute("data-priority"),d=i?i.innerText.split(": ")[1].toLowerCase():"",s=a?a.toLowerCase():"",l=r?r.toLowerCase():"",c=d.includes(e),p=""===t||s===t,u=""===o||l===o;n.style.display=c&&p&&u?"":"none"})}getAllCards();
//# sourceMappingURL=../sourcemaps/main.min.js.map
