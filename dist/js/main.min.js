const tokenAPI="https://ajax.test-danit.com/api/v2/cards/login";async function getToken(e,t){try{const n=await fetch(tokenAPI,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(n.ok)return n.text();throw new Error("User is not registered!")}catch(e){alert(e.message)}}async function showHide(){const e=document.querySelector(".login-button"),t=document.querySelector(".logout-button"),n=document.querySelector(".create-visit-button");e.classList.add("hidden"),t.classList.remove("hidden"),n.classList.remove("hidden")}async function login(){const e=document.querySelector(".login-button"),t=document.querySelector(".logout-button");sessionStorage.getItem("token")?showHide():e.addEventListener("click",(async function(){const e=document.querySelector("#authorization-modal");e.style.display="block";const t=e.querySelector('input[type="email"]'),n=e.querySelector('input[type="password"]');e.querySelector(".send-button").addEventListener("click",(async function(o){o.preventDefault(),t.value&&n.value?async function(e,t,n){const o=await getToken(t,n);sessionStorage.token=o,o&&(showHide(),e.style.display="none")}(e,t.value,n.value):alert("Fill in all fields!")})),e.addEventListener("click",o=>{(o.target.classList.contains("modal")||o.target.classList.contains("btn-close"))&&(e.style.display="none",t.value="",n.value="")})})),t.addEventListener("click",()=>{sessionStorage.removeItem("token"),window.location.reload()})}login();

//# sourceMappingURL=../sourcemaps/main.min.js.map
